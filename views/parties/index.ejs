<%- include("../partials/nav") %>

<div class="party-index">
    <% for (let i = 1; i < 11; i++) { %>
        <% if (parties.length - i < 0) break %>
        <% const party = parties[(parties.length - i)] %>
        <div class="party">
            <h3><%= party.name ? party.name : "New Party" %></h3>
            <form action="/parties/<%= party._id %>/like" method="POST">
                <button type="submit">Like</button>
            </form>
            <p>Likes: <%= party.likes_count %></p>
            <h4><%= party.owner.name %></h4>
            <div class="adventurers">
                <% party.adventurers.forEach(adventurer => { %>
                    <p>
                        <%= adventurer.name ? `${adventurer.name} ` : "" %>
                        <br>
                        <%= adventurer.race ? `${adventurer.race} ` : "" %><%= adventurer.class%>
                    </p>
                <% }) %>
            </div>
            <a class="party-link" href="/parties/<%= party._id %>">details</a>
            <br>
        </div>
    <% } %>
</div>

<%- include("../partials/footer") %>